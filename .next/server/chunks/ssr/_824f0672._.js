module.exports=[70025,a=>{"use strict";var b=a.i(72131),c=a.i(12794),d=a.i(18544),e=a.i(33791),f=a.i(42871),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c,d),this.#d.onSettled?.(a.data,null,b,c,d)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c,d),this.#d.onSettled?.(void 0,a.error,b,c,d))}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(37927);function i(a,c){let e=(0,h.useQueryClient)(c),[i]=b.useState(()=>new g(e,a));b.useEffect(()=>{i.setOptions(a)},[i,a]);let j=b.useSyncExternalStore(b.useCallback(a=>i.subscribe(d.notifyManager.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),k=b.useCallback((a,b)=>{i.mutate(a,b).catch(f.noop)},[i]);if(j.error&&(0,f.shouldThrowError)(i.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}a.s(["useMutation",()=>i],70025)},40865,a=>{a.v({button:"NoteList-module__LCs_aq__button",content:"NoteList-module__LCs_aq__content",footer:"NoteList-module__LCs_aq__footer",link:"NoteList-module__LCs_aq__link",list:"NoteList-module__LCs_aq__list",listItem:"NoteList-module__LCs_aq__listItem",tag:"NoteList-module__LCs_aq__tag",title:"NoteList-module__LCs_aq__title"})},50125,a=>{a.v({active:"Pagination-module__QyWOzW__active",button:"Pagination-module__QyWOzW__button",dots:"Pagination-module__QyWOzW__dots",pagination:"Pagination-module__QyWOzW__pagination"})},15119,a=>{a.v({input:"SearchBox-module__izN5UG__input"})},62401,a=>{a.v({loaderContainer:"Loader-module__ciLxHG__loaderContainer",pulse:"Loader-module__ciLxHG__pulse",text:"Loader-module__ciLxHG__text"})},18491,a=>{a.v({icon:"ErrorMessage-module__kq8UnW__icon",text:"ErrorMessage-module__kq8UnW__text"})},13734,a=>{a.v({app:"page-module__gS09Sa__app",backBtn:"page-module__gS09Sa__backBtn",button:"page-module__gS09Sa__button",container:"page-module__gS09Sa__container",content:"page-module__gS09Sa__content",date:"page-module__gS09Sa__date",header:"page-module__gS09Sa__header",item:"page-module__gS09Sa__item",main:"page-module__gS09Sa__main",tag:"page-module__gS09Sa__tag",toolbar:"page-module__gS09Sa__toolbar"})},44104,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(50944);function f(a,b){return a===b}var g=a.i(38246);a.i(6122);var h=a.i(93747),i=a.i(40865),j=a.i(70025),k=a.i(37927);function l({notes:a}){let c=(0,k.useQueryClient)(),{mutate:d,isPending:e}=(0,j.useMutation)({mutationFn:a=>(0,h.deleteNote)(a),onSuccess:()=>{c.invalidateQueries({queryKey:["notes"]})}});return a.length?(0,b.jsx)("ul",{className:i.default.list,children:a.map(a=>(0,b.jsxs)("li",{className:i.default.listItem,children:[(0,b.jsx)("h2",{className:i.default.title,children:a.title}),(0,b.jsx)("p",{className:i.default.content,children:a.content}),(0,b.jsxs)("div",{className:i.default.footer,children:[(0,b.jsx)("span",{className:i.default.tag,children:a.tag}),(0,b.jsx)(g.default,{href:`/notes/${a.id}`,className:i.default.button,children:"View details"}),(0,b.jsx)("button",{type:"button",className:i.default.button,onClick:()=>d(a.id),disabled:e,children:"Delete"})]})]},a.id))}):null}var m=a.i(50125);function n({page:a,totalPages:c,onChange:d}){if(c<=1)return null;let e=(()=>{let b=[];if(c<=7)for(let a=1;a<=c;a++)b.push(a);else{b.push(1);let d=Math.max(2,a-1),e=Math.min(c-1,a+1);a<=3&&(e=Math.min(c-1,4)),a>=c-2&&(d=Math.max(2,c-3)),d>2&&b.push("...");for(let a=d;a<=e;a++)b.push(a);e<c-1&&b.push("..."),b.push(c)}return b})();return(0,b.jsxs)("div",{className:m.default.pagination,children:[(0,b.jsx)("button",{className:m.default.button,onClick:()=>d(a-1),disabled:1===a,"aria-label":"Previous page",children:"←"}),e.map((c,e)=>(0,b.jsx)("button",{className:`${m.default.button} ${c===a?m.default.active:""} ${"..."===c?m.default.dots:""}`,onClick:()=>"number"==typeof c?d(c):void 0,disabled:"..."===c,children:c},e)),(0,b.jsx)("button",{className:m.default.button,onClick:()=>d(a+1),disabled:a===c,"aria-label":"Next page",children:"→"})]})}var o=a.i(15119);function p({value:a,onChange:c}){return(0,b.jsx)("input",{className:o.default.input,type:"text",placeholder:"Search notes",value:a,onChange:a=>c(a.target.value)})}var q=a.i(62401);function r(){return(0,b.jsx)("div",{className:q.default.loaderContainer,children:(0,b.jsx)("p",{className:q.default.text,children:"Loading notes, please wait..."})})}var s=a.i(18491);function t(){return(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:s.default.icon,children:"⚠️"}),(0,b.jsx)("p",{className:s.default.text,children:"Something went wrong. Please try again later."})]})}var u=a.i(13734);function v({tag:a}){var i,j,k,m;let o=(0,e.useSearchParams)(),q=(0,e.useRouter)(),s=(0,e.usePathname)(),v=o.get("search")||"",w=Number(o.get("page"))||1,[x,y]=(0,c.useState)(v),[z]=(i=(0,c.useRef)(x),j=(0,c.useState)({})[1],k=function(a,b,d,e){var f=this,g=(0,c.useRef)(null),h=(0,c.useRef)(0),i=(0,c.useRef)(0),j=(0,c.useRef)(null),k=(0,c.useRef)([]),l=(0,c.useRef)(),m=(0,c.useRef)(),n=(0,c.useRef)(a),o=(0,c.useRef)(!0);n.current=a;var p=!b&&0!==b&&!1;if("function"!=typeof a)throw TypeError("Expected a function");b=+b||0;var q=!!(d=d||{}).leading,r=!("trailing"in d)||!!d.trailing,s="maxWait"in d,t="debounceOnServer"in d&&!!d.debounceOnServer,u=s?Math.max(+d.maxWait||0,b):null;return(0,c.useEffect)(function(){return o.current=!0,function(){o.current=!1}},[]),(0,c.useMemo)(function(){var a=function(a){var b=k.current,c=l.current;return k.current=l.current=null,h.current=a,i.current=i.current||a,m.current=n.current.apply(c,b)},c=function(a,b){p&&cancelAnimationFrame(j.current),j.current=setTimeout(a,b)},d=function(a){if(!o.current)return!1;var c=a-g.current;return!g.current||c>=b||c<0||s&&a-h.current>=u},v=function(b){return j.current=null,r&&k.current?a(b):(k.current=l.current=null,m.current)},w=function a(){var e=Date.now();if(q&&i.current===h.current&&x(),d(e))return v(e);if(o.current){var f=b-(e-g.current);c(a,s?Math.min(f,u-(e-h.current)):f)}},x=function(){e&&e({})},y=function(){if(t){var e=Date.now(),i=d(e);if(k.current=[].slice.call(arguments),l.current=f,g.current=e,i){if(!j.current&&o.current)return h.current=g.current,c(w,b),q?a(g.current):m.current;if(s)return c(w,b),a(g.current)}return j.current||c(w,b),m.current}};return y.cancel=function(){var a=j.current;a&&clearTimeout(j.current),h.current=0,k.current=g.current=l.current=j.current=null,a&&e&&e({})},y.isPending=function(){return!!j.current},y.flush=function(){return j.current?v(Date.now()):m.current},y},[q,s,b,u,r,p,!1,t,e])}((0,c.useCallback)(function(a){i.current=a,j({})},[j]),300,void 0,j),f((m=(0,c.useRef)(x)).current,x)||(k(x),m.current=x),[i.current,k]);(0,c.useEffect)(()=>{y(v)},[v]),(0,c.useEffect)(()=>{if(z===v)return;let a=new URLSearchParams(o.toString());z?a.set("search",z):a.delete("search"),a.set("page","1"),q.replace(`${s}?${a.toString()}`)},[z,s,q,o,v]);let{data:A,isLoading:B,isError:C}=(0,d.useQuery)({queryKey:["notes",w,v,a],queryFn:()=>(0,h.fetchNotes)({page:w,query:v,tag:a})});return(0,b.jsxs)("div",{className:u.default.container,children:[(0,b.jsxs)("div",{className:u.default.topBar,children:[(0,b.jsx)(p,{value:x,onChange:a=>{y(a)}}),(0,b.jsx)(g.default,{href:"/notes/action/create",className:u.default.createBtn,children:"Create note +"})]}),B&&(0,b.jsx)(r,{}),C&&(0,b.jsx)(t,{}),A&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l,{notes:A.notes}),A.totalPages>1&&(0,b.jsx)(n,{page:A.currentPage,totalPages:A.totalPages,onChange:a=>{let b=new URLSearchParams(o.toString());b.set("page",a.toString()),q.push(`${s}?${b.toString()}`)}})]})]})}a.s(["default",()=>v],44104)}];

//# sourceMappingURL=_824f0672._.js.map